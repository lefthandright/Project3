# Define constants
N_VALUE: .word 30
M_VALUE: .word 116   # ASCII value of 't'
MAX_INPUT_LENGTH: .word 1000

# Data section
.data
NA_MESSAGE: .asciiz "N/A"
NEWLINE: .asciiz "\n"
SEMICOLON: .asciiz ";"
N_0: .byte '0'

input_string: .space 1000

# Text segment
.text
.globl main

main:
  # Read string from user input
  li $v0, 8
  la $a0, input_string
  li $a1, 1000
  syscall

  # Pass address of string to Subprogram A
  la $a0, input_string
  jal subprogram_A

  # Exit program
  li $v0, 10
  syscall

# Subprogram A
subprogram_A:
  addi $sp, $sp, -4   # Allocate space for return address
  sw $ra, 0($sp)      # Save return address

  move $s0, $a0       # Save address of string
  move $t0, $a0       # Pointer to beginning of string

loop_A:
  lb $t1, 0($t0)     # Load byte from string
  beq $t1, 0, end_A  # If null terminator, end loop
  beq $t1, ';', process_substring  # If semicolon, process substring

  addi $t0, $t0, 1   # Move to next character
  j loop_A

process_substring:
  sub $a0, $t0, $s0  # Calculate length of substring
  add $a0, $a0, $t0  # Calculate address of substring

  jal subprogram_B   # Call Subprogram B
  move $s1, $v0      # Save return value
